(this["webpackJsonpphonebook-frontend"]=this["webpackJsonpphonebook-frontend"]||[]).push([[0],{23:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(16),a=n.n(r),o=(n(23),n(18)),c=n(5),s=n(2),i=n(17),u=n(4),l=n.n(u),d="/api/persons",f=n(0),m=function(e){var t=e.newPerson,n=e.setNewPerson,r=e.persons,a=e.setPersons,o=e.setNotification,c=e.INITIAL_NEW_PERSON,s=function(e){return o({text:e,type:"error"})},u=function(e){var r=e.id;window.confirm("".concat(t.name," is already added to phonebook, replace the old number with a new one?"))&&(function(e,t){return l.a.put("".concat(d,"/").concat(t),e).then((function(e){return e.data})).catch((function(e){return e.response.data}))}(t,r).then((function(e){if(e.error)return s(e.error);a((function(t){return t.map((function(t){return t.id===r?e:t}))})),o({text:"Updated ".concat(e.name),type:"message"})})).catch((function(e){console.log(e),a((function(e){return e.filter((function(e){return e.id!==r}))})),s("Information of ".concat(t.name," has already been removed from server"))})),n(c),setTimeout((function(){return o({text:"",type:""})}),5e3))},m="bg-gray-50 p-2 rounded-lg shadow-md outline-none transition-all duration-75 ease-in-out focus:ring-2";return Object(f.jsxs)("form",{className:" bg-gray-200 fixed bottom-0 flex flex-row flex-wrap justify-between content-start space-y-4 p-6 pt-4 md:sticky md:col-start-4 md:col-span-2 md:row-start-2 md:row-end-4 md:h-full",onSubmit:function(e){e.preventDefault();var f,m=r.filter((function(e){return e.name===t.name}));if(0!==m.length)return u(m[0]);(f=t,l.a.post(d,f).then((function(e){return e.data})).catch((function(e){return e.response.data}))).then((function(e){if(e.error)return s(e.error);o({text:"Added ".concat(e.name),type:"message"}),a((function(t){return[].concat(Object(i.a)(t),[e])}))})),n(c),setTimeout((function(){return o({text:"",type:""})}),5e3)},children:[Object(f.jsx)("h2",{className:"m-auto",children:"Add new contact"}),Object(f.jsx)("input",{className:m+" w-full",placeholder:"Name...",type:"text",onChange:function(e){return n((function(t){return{name:e.target.value,tfno:t.tfno}}))},value:t.name,"aria-label":"Contact name"}),Object(f.jsx)("input",{className:m+" w-3/4 inline",placeholder:"Number...",type:"tel",onChange:function(e){return n((function(t){return{name:t.name,tfno:e.target.value}}))},value:t.tfno,"aria-label":"Telephone number"}),Object(f.jsx)("button",{className:"bg-gray-50 inline w-10 p-1.5 rounded-full shadow-lg transition-all duration-500 ease-in-out transform hover:scale-125 hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-200",type:"submit","aria-label":"Add contact",children:Object(f.jsx)("svg",{viewBox:"0 0 110 110",className:"stroke-current text-blue-500 duration-500 ease-in-out hover:text-gray-50",children:Object(f.jsx)("path",{d:"M 55,0 l 0,120 M 0,56 l 120,0",strokeWidth:"15"})})})]})},b=function(e){var t=e.filter,n=e.setFilter;return Object(f.jsx)("input",{className:"bg-gray-100 placeholder-gray-400 sticky top-4 w-10/12 m-auto py-1 px-3 outline-none rounded-lg shadow-md transition-all duration-400 ease-in-out focus:bg-blue-100 md:col-span-3",placeholder:"Search...",type:"text",onChange:function(e){n(e.target.value)},value:t,"aria-label":"Search contact"})},h=function(e){var t=e.person,n=e.handleDelete,r=t.name,a=t.tfno,o=t.id;return Object(f.jsxs)("li",{className:"flex space-x-4 px-5 py-3 content-center",children:[Object(f.jsx)("div",{className:"m-auto",children:Object(f.jsx)("img",{width:"40px",height:"40px",className:"bg-gray-100 rounded-full",src:"./person.svg",alt:"Person icon"})}),Object(f.jsxs)("div",{className:"flex-grow",children:[Object(f.jsx)("strong",{children:r}),Object(f.jsx)("span",{className:"block text-xs text-gray-600",children:a})]}),Object(f.jsx)("button",{className:"m-auto",onClick:n(o,r),children:Object(f.jsx)("img",{width:"25px",height:"25px",src:"./trash.svg",alt:"Trash","aria-label":"Delete contact"})})]})},p=function(e){var t=e.data,n=e.filter,r=e.setPersons,a=function(e,t){return function(){window.confirm("Delete ".concat(t,"?"))&&function(e){return l.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.status}))}(e).then((function(t){t<200||t>=300||r((function(t){return t.filter((function(t){return t.id!==e}))}))}))}};return Object(f.jsx)("ul",{className:"divide-y divide-gray-100 mx-2 my-4 md:col-span-3 mb-48 md:mb-4",children:t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return Object(f.jsx)(h,{person:e,handleDelete:a},e.id)}))})},j=function(e){var t=e.text,n=e.type;return""===t?null:Object(f.jsx)("div",{className:"notification ".concat(n),children:t})},x={name:"",tfno:""},g=function(){var e=Object(s.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)(x),i=Object(c.a)(a,2),u=i[0],h=i[1],g=Object(s.useState)(""),O=Object(c.a)(g,2),y=O[0],w=O[1],v=Object(s.useState)({text:"",type:"message"}),N=Object(c.a)(v,2),k=N[0],P=N[1];return Object(s.useEffect)((function(){l.a.get(d).then((function(e){return e.data})).then((function(e){return r(e)}))}),[]),Object(f.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 max-w-screen-lg mx-auto",children:[Object(f.jsx)("h1",{className:"md:col-span-5 text-3xl my-4 mx-auto",children:"Contacts"}),Object(f.jsx)(j,Object(o.a)({},k)),Object(f.jsx)(b,{filter:y,setFilter:w}),0===n.length?Object(f.jsx)("p",{children:"Empty list"}):Object(f.jsx)(p,{data:n,setPersons:r,filter:y}),Object(f.jsx)(m,{newPerson:u,setNewPerson:h,persons:n,setPersons:r,setNotification:P,INITIAL_NEW_PERSON:x})]})},O=document.getElementById("root");a.a.render(Object(f.jsx)(g,{}),O)}},[[43,1,2]]]);
//# sourceMappingURL=main.bbeb7aa8.chunk.js.map